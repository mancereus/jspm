<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-document.html">
<script src="data.js"></script>
<link rel="stylesheet" href="../css/main.css">

<dom-module id="zenmaster-game">

    <template>
        <style>
            .try {
                font-size: 150%;
                font-weight: bold;
            }
            
            .inp {
                width: 120px;
            }
            
            .Inhalt {
                background-color: lightblue;
                width: 250px;
                padding: 0;
                margin: 5px;
            }
            
            .Form {
                background-color: lightcoral;
                width: 250px;
                padding: 0;
                margin: 5px;
            }
            
            .Ort {
                background-color: lightgreen;
                width: 250px;
                padding: 0;
                margin: 5px;
            }
            
            .Bewegung {
                background-color: yellow;
                width: 250px;
                padding: 0;
                margin: 5px;
            }
            
            .cards {
                display: flex;
                flex-wrap: wrap;
            }
            
            .card {
                height: 100px;
                border: 1px solid black;
                text-align: center;
                vertical-align: middle;
                padding: 5px 10px;
                font-size: 150%;
                font-weight: bold;
            }
            
            .page-break {
                page-break-after: always;
                background-color: red;
                width: 650px;
            }
            
            img {
                width: 120px;
                height: 200px;
            }
            
            .info {
                width: 250px;
                margin: 5px;
                border: 1px solid black;
                background-color: lightgray;
            }
            
            .header {
                text-align: center;
                width: 240px;
                font-size: 60%;
                margin: 0;
                padding: 0;
            }
        </style>
        <firebase-document location="https://protogames.firebaseio.com/zenmaster/" data="{{data}}" log></firebase-document>
        <input type="button" on-click="newGame" value="Neues Spiel">
        <div class="cards">
            <template is="dom-repeat" items="{{data.cards}}">

                <div class$="{{item.type}}">
                    <div class="card">
                        <span class="header">{{item.type}} / {{item.type2}}</span>
                        <br/>
                        <span>{{item.name}}</span>
                    </div>
                </div>
            </template>

        </div>
        <span class="try">nichts gefunden? </span>
        <input type="button" onclick="history.go(0)" value="neu laden">
        <br/>
        <h3>2. Schreibe deine LÃ¶sung auf:</h3>
        <input style="width: 250px;" class="try inp" value="{{data.solution::input}}"></input>
        <button on-click="finishTurn">Fertig</button>
    </template>

    <script>
        Polymer({
            is: 'zenmaster-game',
            properties: {
                cards: {
                    type: Array,
                    notify:true
                },
                data: Object,
            },
            shuffle: function(o) {
                for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
                return o;    
            },
            newCards: function() {
                this.shuffle(dataform);
                this.shuffle(datainhalt);
                this.shuffle(dataort);
                this.shuffle(dataextra);
                this.push('data.cards',dataform.pop());
                this.push('data.cards',datainhalt.pop());
                this.push('data.cards',dataort.pop());
                this.push('data.cards',dataextra.pop());
            },
            newGame: function() {
                this.data = {
                };
                this.set("data.cards", []);
                this.set("data.tips", []);
                this.set("data.solution", "");
                this.newCards();
                this.push('data.tips',
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false,},
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'help1',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'help2',value:"", form:false,inhalt:false,ort:false,bewegung:false},
                {name: 'tip',value:"", form:false,inhalt:false,ort:false,bewegung:false});
            },
            attached: function() {
                                
            }
                });
    </script>

</dom-module>
</head>