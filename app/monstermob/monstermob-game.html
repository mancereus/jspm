<!doctype html>
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="monstermob-container.html">
<link rel="import" href="monstermob-card.html">

<dom-module id="monstermob-game">

    <template>
        <style>
            :host {
                cursor: pointer;
                padding: 4px;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            #tmpl {
                display: flex;
                justify-content: space-around;
                align-content: space-between;
            }
        </style>
        <template is="dom-repeat" items="{{players}}">
            <monstermob-container container="{{item}}" data="{{data}}">
            </monstermob-container>

        </template>
    </template>

    <script>
        Polymer({
            is: 'monstermob-game',
            properties: {
                data: Array,
                players : {
                    type:Array,
                    value: function() {
                        return [
                            {name:'player1', life: 2, gold: 1},
                            {name:'player2', life: 2, gold: 1},
                            {name:'player3', life: 2, gold: 1},
                            {name:'player4', life: 2, gold: 1},
                        ];
                    }
                }
            },
            ready: function() {
                this.data = this.shuffle(cards);   
                var count = 0;
                for(idx in this.players) {
                    this.data[count++].owner = this.players[idx].name;
                    this.data[count++].owner = this.players[idx].name;
                }
            },
            refill: function() {
                var count = 0;
                for(idx in this.players) {
                    var filtered = this.data.filter(isOwner(this.players[idx].name));
                    if (filtered.length == 1) {
                    }
                }
            },
			isOwner: function (item , own){
                return item.owner == own;
            },
			shuffle: function (o){
			    for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
			    return o;
			},
            attached: function() {
            }
        });
    </script>

</dom-module>