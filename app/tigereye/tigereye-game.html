<!doctype html>
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-document.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="tigereye-card.html">
<link rel="import" href="game-hexagon.html">
<link rel="import" href="game-meeple.html">
<link rel="import" href="game-piece.html">
<script src="data.js"></script>


<dom-module id="tigereye-game">

    <template>
        <style>
            :host {
                cursor: pointer;
                padding: 4px;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }

            div.flex {
                width: 1600px;
                display: flex;
                flex-wrap: wrap;
                justify-content: space-around;
                align-content: space-between;
            }
        </style>
        <div class="flex">
            <template is="dom-repeat" items="{{game.cards}}">
                <tigereye-card data="{{item}}"></tigereye-card>
            </template>
        </div>
        <game-hexagon imgsrc="Tiger" top="-300" left="1270"></game-hexagon>
        <game-piece color="red" top="-550" left="60"></game-piece>
        <game-piece color="red" top="-580" left="20"></game-piece>
        <game-piece color="blue" top="-610" left="60"></game-piece>
        <game-piece color="blue" top="-640" left="20"></game-piece>
    </template>

    <script>
        Polymer({
            is: 'tigereye-game',
            properties: {
                game: Object,
                notify: true
            },
            ready: function() {
                console.log("ready");
                game.cards =  this.shuffle(game.cards);
                game.cards.push(game.end);
                game.cards.unshift(game.start);
                 game.cards.forEach(x => x.open = Math.random()<.5);
                this.game = game;
            },
            attached: function() {
            },
			shuffle: function (o){
			    for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
			    return o;
			}
        });
    </script>

</dom-module>